(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},17:function(e,t,a){e.exports=a(27)},22:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),o=(a(22),a(12),a(2)),i=a(3),s=a(5),u=a(4),h=a(1),m=a(6),f=(n.Component,a(13),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={dataGet:[],headingValue:"",result:[],text:""},a.searching=a.searching.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"searching",value:function(e){var t=this.state.dataGet,a=e.target.value,n=t.filter(function(e){return e.name.substring(0,a.length).toLowerCase()===a.toLowerCase()});this.setState({result:n,text:a})}},{key:"render",value:function(){var e=this.state,t=e.dataGet,a=e.headingValue,n=e.result,c=e.text.length?n:t;return r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Search",onChange:this.searching,className:"search-input"}),r.a.createElement("table",{class:"zebra"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("center",null,"S.NO")),r.a.createElement("th",null,r.a.createElement("center",null,a)),r.a.createElement("th",null,"Name"))),r.a.createElement("tbody",null,c.map(function(e,t){return r.a.createElement("tr",{key:1+t},r.a.createElement("td",null,r.a.createElement("center",null,1+t)),"id"===a?r.a.createElement("td",null,e.id):r.a.createElement("td",null,e.url),r.a.createElement("td",null,e.name))}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){t.dataGet=e.result,"forces"===e.value?t.headingValue="id":t.headingValue="url"}}]),t}(n.Component)),d=a(16),g=a(7),v=a.n(g),p=a(10),E=a(8),b=a.n(E);a(26);function y(e,t){return new Promise(function(a,n){""!==e&&""!==t?fetch("https://data.police.uk/api/crimes-no-location?category=".concat(e,"&force=").concat(t)).then(function(e){return e.json()}).then(function(e){a(e)}).catch(function(e){n({message:"Something Went Wrong..."})}):b()({title:"Select Category and Force",buttons:!1,text:"",timer:1500})})}var S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={crimeList:[],forcesList:[],crimeCategory:"",forcelocation:"",finalList:[],limit:15},a.finalSearchCrime=a.finalSearchCrime.bind(Object(h.a)(a)),a.finalSearchFroce=a.finalSearchFroce.bind(Object(h.a)(a)),a.searchFinally=a.searchFinally.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise(function(e,t){fetch("https://data.police.uk/api/crime-categories").then(function(e){return e.json()}).then(function(t){e(t)}).catch(function(e){t({message:"Something Went Wrong..."})})});case 3:return t=e.sent,e.next=6,new Promise(function(e,t){fetch("https://data.police.uk/api/forces").then(function(e){return e.json()}).then(function(t){e(t)}).catch(function(e){t({message:"Something Went Wrong..."})})});case 6:a=e.sent,this.setState({crimeList:t,forcesList:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("somevent wrong");case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"finalSearchCrime",value:function(e){console.log(e.target.value+"<=====c"),this.setState({crimeCategory:e.target.value})}},{key:"finalSearchFroce",value:function(e){console.log(e.target.value+"<=====f"),this.setState({forcelocation:e.target.value})}},{key:"searchFinally",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.crimeCategory,n=t.forcelocation,console.log(a,n),e.next=4,y(a,n);case 4:r=e.sent,console.log("screnn =======>",r),r.length>0&&""!==a&&""!==n?this.setState({finalList:r}):(this.setState({finalList:[]}),b()({title:"Result Not Found",buttons:!1,text:"",timer:1500}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onScroll",value:function(e){e.target.scrollHeight===Math.ceil(e.target.clientHeight+e.target.scrollTop)&&this.loadMore()}},{key:"loadMore",value:function(){console.log("loadmore ==>"),this.setState({limit:this.state.limit+15})}},{key:"render",value:function(){var e=this.state,t=e.crimeList,a=e.forcesList,n=e.finalList,c=this.state.limit,l=Object(d.a)(n);return l.length=c,r.a.createElement("div",{className:"selectBarHeader"},r.a.createElement("div",{className:"selectBar"},r.a.createElement("select",{className:"selectDesign",onChange:this.finalSearchCrime},r.a.createElement("option",{value:""},"select Category"),t.map(function(e){return r.a.createElement("option",{key:e.url,value:e.url},e.name)})),r.a.createElement("select",{className:"selectDesign",onChange:this.finalSearchFroce},r.a.createElement("option",{value:""},"Select Force"),a.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement("button",{className:"searchBtn",onClick:this.searchFinally},"Search"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"scrollingDiv",onScroll:this.onScroll.bind(this)},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("center",null,"S.No")),r.a.createElement("th",null,r.a.createElement("center",null,"Category")),r.a.createElement("th",null,r.a.createElement("center",null,"Month")),r.a.createElement("th",null,r.a.createElement("center",null,"Outcome")))),r.a.createElement("tbody",null,l.map(function(e,t){return r.a.createElement("tr",{key:"".concat(t)},console.log(e),r.a.createElement("td",null,r.a.createElement("center",null,1+t)),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.month),r.a.createElement("td",null,e.outcome_status.category))})))))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={value:"Dashboard"},a.changeType=a.changeType.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"changeType",value:function(e){var t=this,a=e.target.value;"Dashboard"!==a?fetch("https://data.police.uk/api/".concat(a)).then(function(e){return e.json()}).then(function(e){return t.setState({value:a,result:e})}):this.setState({value:a})}},{key:"render",value:function(){var e=this.state,t=e.value,a=e.result;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"nav"},r.a.createElement("nav",{className:"navBar"},r.a.createElement("select",{onChange:this.changeType,className:"selectDesign"},r.a.createElement("option",{value:"Dashboard"},"Dashboard"),r.a.createElement("option",{value:"forces"},"Forces"),r.a.createElement("option",{value:"crime-categories"},"Crime Categories")))),"Dashboard"===t?r.a.createElement(S,null):r.a.createElement(f,{result:a,value:t}))}}]),t}(n.Component);var j=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},"Searching Dashboard"),r.a.createElement(k,null)," ")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.a94f7cec.chunk.js.map